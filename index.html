<!DOCTYPE html> 
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content= "IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Andrija MihailoviÄ‡</title>
    <link rel="icon" type="images/x-icon" href="images/favicon.ico" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>Andrija_studios</header>  
    <canvas id="trailCanvas"></canvas>
  <canvas id="sceneCanvas"></canvas>
  <script src="script.js"></script>
</body>
</html>

</script>

<script>

const sceneCanvas = document.getElementById("sceneCanvas");
const trailCanvas = document.getElementById("trailCanvas");
const sceneCtx = sceneCanvas.getContext("2d");
const trailCtx = trailCanvas.getContext("2d");

let width = window.innerWidth;
let height = window.innerHeight;
sceneCanvas.width = trailCanvas.width = width;
sceneCanvas.height = trailCanvas.height = height;

window.addEventListener("resize", () => {
  width = window.innerWidth;
  height = window.innerHeight;
  sceneCanvas.width = trailCanvas.width = width;
  sceneCanvas.height = trailCanvas.height = height;
  positionObjects();
});

// === Cursor/Touch Trail ===
let trail = [];
function addToTrail(x, y) {
  trail.push({ x, y, alpha: 1.0 });
  if (trail.length > 100) trail.shift(); // keep it smooth
}
window.addEventListener("mousemove", e => addToTrail(e.clientX, e.clientY));
window.addEventListener("touchmove", e => {
  const t = e.touches[0];
  addToTrail(t.clientX, t.clientY);
}, { passive: true });

function drawTrail() {
  trailCtx.clearRect(0, 0, width, height);
  for (let i = 1; i < trail.length; i++) {
    const p1 = trail[i - 1];
    const p2 = trail[i];
    trailCtx.strokeStyle = `rgba(255,255,255,${p2.alpha})`;
    trailCtx.lineWidth = 2;
    trailCtx.beginPath();
    trailCtx.moveTo(p1.x, p1.y);
    trailCtx.lineTo(p2.x, p2.y);
    trailCtx.stroke();
    p2.alpha -= 0.01; // slower fade
  }
  trail = trail.filter(p => p.alpha > 0);
  requestAnimationFrame(drawTrail);
}
drawTrail();

// === Object Class and Shapes (same as before) ===
// You can reuse the Object3D class, cube, pyramid, and polygon setup from the previous message
// ... (to avoid duplication, keep all previous code as-is)

// === Interactions ===
function getXY(e) {
  return e.touches ? { x: e.touches[0].clientX, y: e.touches[0].clientY } : { x: e.clientX, y: e.clientY };
}

sceneCanvas.addEventListener("mousedown", startDrag);
sceneCanvas.addEventListener("touchstart", startDrag, { passive: false });
sceneCanvas.addEventListener("mousemove", onDrag);
sceneCanvas.addEventListener("touchmove", onDrag, { passive: false });
sceneCanvas.addEventListener("mouseup", endDrag);
sceneCanvas.addEventListener("touchend", endDrag);

// === Click to Navigate (works on touch too) ===
sceneCanvas.addEventListener("click", (e) => {
  const { x, y } = getXY(e);
  if (draggingObject) return;
  for (let obj of objects) {
    if (obj.isClicked(x, y)) {
      if (obj.label.includes("Product")) {
        window.location.href = "product.html";
      } else if (obj.label.includes("Graphic")) {
        window.location.href = "graphic.html";
      } else if (obj.label.includes("Motion")) {
        window.location.href = "motion.html";
      }
    }
  }
});
sceneCanvas.addEventListener("touchend", (e) => {
  if (!draggingObject) {
    const { x, y } = getXY(e);
    for (let obj of objects) {
      if (obj.isClicked(x, y)) {
        if (obj.label.includes("Product")) {
          window.location.href = "product.html";
        } else if (obj.label.includes("Graphic")) {
          window.location.href = "graphic.html";
        } else if (obj.label.includes("Motion")) {
          window.location.href = "motion.html";
        }
      }
    }
  }
});

// === Animate ===
function animate() {
  sceneCtx.clearRect(0, 0, width, height);
  for (let obj of objects) {
    obj.update();
    obj.draw(sceneCtx);
  }
  requestAnimationFrame(animate);
}
animate();


</script>

</body> 
</html>

    
